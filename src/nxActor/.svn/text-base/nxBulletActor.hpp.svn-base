#ifndef  NXBULLETACTOR_H
#define  NXBULLETACTOR_H

#include <nxCore/nxCore.hpp>
#include <nxCore/nxMath.hpp>
#include <nxCore/nxTypes.hpp>
#include <nxActor/nxBaseActor.hpp>
#include <nxGeom/nxPoint3.hpp>
#include <nxGameLogic/nxBaseGameLogic.hpp>

/*
 * =====================================================================================
 *        Class: nxBulletActor
 *  Description:
 * =====================================================================================
 */
class nxBulletActor : public nxBaseActor
{
	public:

		nxBulletActor();

		nxBulletActor(nxReal yrot, nxPoint3 pos, float radius, float speed);

		virtual ~nxBulletActor();

		virtual nxBulletActor* VClone()
		{
//			return new nxBulletActor(*this);
			nxBulletActor* result = new nxBulletActor(m_Orientation, m_Pos, m_Radius, m_Speed);
			result->VSetColour(m_Colour);

			result->VSetViewId(m_ViewId);
			result->VSetId(m_Id);
			return result;
		}

		virtual void VInit(stringstream& in)
		{
			nxBaseActor::VInit(in);

			in >> m_Radius;

			in >> m_Colour.r;
			in >> m_Colour.g;
			in >> m_Colour.b;
			in >> m_Colour.alpha;

			in >> m_Speed;
		}

		virtual void VSerialize(stringstream& out)
		{
			nxBaseActor::VSerialize(out);

			out << m_Radius << " ";

			out << m_Colour.r << " ";
			out << m_Colour.g << " ";
			out << m_Colour.b << " ";
			out << m_Colour.alpha << " ";

			out << m_Speed << " ";
		}

		virtual void VOnUpdate(int deltaMilliseconds)
		{
		}

		virtual void VCreate() 
		{
			/*
			m_Pos.SetX(20);
			m_Pos.SetY(10);
			m_Orientation = NX_PI_OVER_2; //XXX:Magic Number, should be random?
			m_Radius = 3.0f; //XXX : Magic number
			*/
/*
			shared_ptr<nxIActor> pActor(this);
			logic->VAddActor(pActor);
			//TODO:Add physics
			logic->VGetGamePhysics()->VCreateSphere(m_Radius, pActor);

			return pActor;
			*/
		}

		virtual void VSetRadius(float val)
		{
			m_Radius = val;
		}

		virtual nxReal GetRadius() const
		{
			return m_Radius;
		}

		virtual void VSetColour(nxColour colour)
		{
			m_Colour = colour;
		}

		virtual nxColour VGetColour() const
		{
			return m_Colour;
		}

		virtual float VGetSpeed() const
		{
			return m_Speed;
		}
		
	protected:
		nxReal m_Radius;
		nxColour m_Colour;
		float m_Speed;
	private:
};


#endif   // NXBULLETACTOR_H
